"use strict";(self["webpackChunkspringboot_vue_demo"]=self["webpackChunkspringboot_vue_demo"]||[]).push([[763],{1763:function(e,t,o){o.r(t),o.d(t,{default:function(){return C}});var r=o(6252);const a={class:"bg",style:{width:"100%",height:"100vh","background-color":"darkslateblue",overflow:"hidden"}},d={style:{width:"400px",margin:"150px auto"}},s=(0,r._)("div",{style:{color:"#cccccc","font-size":"30px","text-align":"center"}},"欢迎登录",-1),l={style:{display:"flex"}};function i(e,t,o,i,n,u){const m=(0,r.up)("el-input"),h=(0,r.up)("el-form-item"),p=(0,r.up)("ValidCode"),f=(0,r.up)("el-button"),c=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",d,[s,(0,r.Wm)(c,{ref:"form",model:n.form,size:"normal",rules:n.rules},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{prop:"username"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{"prefix-icon":i.Avatar,modelValue:n.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>n.form.username=e)},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(h,{prop:"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{"prefix-icon":i.Lock,modelValue:n.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.form.password=e),"show-password":""},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r._)("div",l,[(0,r.Wm)(m,{"prefix-icon":"Key",modelValue:n.form.validCode,"onUpdate:modelValue":t[2]||(t[2]=e=>n.form.validCode=e),style:{width:"50%"},placeholder:"请输入验证码"},null,8,["modelValue"]),(0,r.Wm)(p,{onInput:u.createValidCode},null,8,["onInput"])])])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,{style:{width:"100%"},type:"primary",plain:"",onClick:u.login},{default:(0,r.w5)((()=>[(0,r.Uk)("登 录")])),_:1},8,["onClick"])])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,{style:{width:"100%"},type:"primary",plain:"",onClick:u.register},{default:(0,r.w5)((()=>[(0,r.Uk)("注 册")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])])}o(7658);var n=o(5781),u=o(4471),m=o(3577);function h(e,t,o,a,d,s){return(0,r.wg)(),(0,r.iD)("div",{class:"ValidCode disabled-select",style:(0,m.j5)(`width:${o.width}; height:${o.height}`),onClick:t[0]||(t[0]=(...e)=>s.refreshCode&&s.refreshCode(...e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(d.codeList,((e,t)=>((0,r.wg)(),(0,r.iD)("span",{key:t,style:(0,m.j5)(s.getStyle(e))},(0,m.zw)(e.code),5)))),128))],4)}var p={name:"ValidCode",model:{prop:"value",event:"input"},props:{width:{type:String,default:"100px"},height:{type:String,default:"40px"},length:{type:Number,default:4},refresh:{type:Number}},data(){return{codeList:[]}},watch:{refresh(){this.createdCode()}},mounted(){this.createdCode()},methods:{refreshCode(){this.createdCode()},createdCode(){const e=this.length,t=[],o="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",r=o.length;for(let a=0;a<e;a++){const e=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())];t.push({code:o.charAt(Math.floor(Math.random()*r)),color:`rgb(${e})`,fontSize:+[Math.floor(10*Math.random())]+6+10+"px",padding:`${[Math.floor(10*Math.random())]}px`,transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}this.codeList=t,this.$emit("input",t.map((e=>e.code)).join(""))},getStyle(e){return`color: ${e.color}; font-size: ${e.fontSize}; padding: ${e.padding}; transform: ${e.transform}`}}},f=o(3744);const c=(0,f.Z)(p,[["render",h],["__scopeId","data-v-abda156c"]]);var g=c,w={name:"Login",components:{ValidCode:g},setup(){return{Avatar:n.Avatar,Lock:n.Lock,Key:n.Key}},data(){return{form:{},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},validCode:""}},methods:{register(){this.$router.push("/register")},createValidCode(e){this.validCode=e},login(){this.$refs["form"].validate((e=>{if(e){if(!this.form.validCode)return void this.$message.error("请填写验证码");if(this.form.validCode.toLowerCase()!==this.validCode.toLowerCase())return void this.$message.error("验证码错误");u.Z.post("/user/login",this.form).then((e=>{"0"===e.code?(this.$message({type:"success",message:"登录成功"}),sessionStorage.setItem("user",JSON.stringify(e.data)),this.$router.push("/")):this.$message({type:"error",message:e.msg})}))}}))}}};const v=(0,f.Z)(w,[["render",i]]);var C=v}}]);
//# sourceMappingURL=763.e1e964dd.js.map